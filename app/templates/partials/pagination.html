{% if total_pages > 1 %}
<div class="flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-2 mt-8 px-4">
    <!-- Previous button -->
    {% if has_prev %}
    <button
        class="w-full sm:w-auto px-6 sm:px-4 py-3 sm:py-2 text-lg sm:text-sm font-medium text-bajan-blue hover:text-bajan-yellow transition-colors duration-200 flex items-center justify-center space-x-2 sm:space-x-1 bg-white/80 backdrop-blur-sm rounded-lg shadow-sm hover:shadow-md"
        hx-get="/htmx/entries?page={{ current_page - 1 }}" hx-target="#news">
        <svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        <span>Newer</span>
    </button>
    {% endif %}

    <!-- Page numbers -->
    <div class="pagination-container hidden md:flex md:flex-row items-center gap-2 sm:gap-1"
        data-current-page="{{ current_page }}" data-total-pages="{{ total_pages }}">
        <!-- Populated by script -->
    </div>

    <!-- Next button -->
    {% if has_next %}
    <button
        class="w-full sm:w-auto px-6 sm:px-4 py-3 sm:py-2 text-lg sm:text-sm font-medium text-bajan-blue hover:text-bajan-yellow transition-colors duration-200 flex items-center justify-center space-x-2 sm:space-x-1 bg-white/80 backdrop-blur-sm rounded-lg shadow-sm hover:shadow-md"
        hx-get="/htmx/entries?page={{ current_page + 1 }}" hx-target="#news">
        <span>Older</span>
        <svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
    </button>
    {% endif %}
</div>

<script>
    (function () {
        const paginationContainer = document.querySelector('.pagination-container[data-current-page]');
        if (!paginationContainer) {
            return;
        }

        const currentPage = parseInt(paginationContainer.dataset.currentPage, 10);
        const totalPages = parseInt(paginationContainer.dataset.totalPages, 10);

        function createPageButton(page, isCurrent = false) {
            if (isCurrent) {
                const span = document.createElement('span');
                span.className = "w-12 sm:w-10 h-12 sm:h-10 flex items-center justify-center text-lg sm:text-base font-bold bg-bajan-blue text-white rounded-lg shadow-sm";
                span.textContent = page;
                return span;
            } else {
                const button = document.createElement('button');
                button.className = "w-12 sm:w-10 h-12 sm:h-10 flex items-center justify-center text-lg sm:text-base text-gray-700 hover:text-bajan-blue transition-colors duration-200 bg-white/80 backdrop-blur-sm rounded-lg hover:shadow-sm";
                button.textContent = page;
                button.setAttribute('hx-get', `/htmx/entries?page=${page}`);
                button.setAttribute('hx-target', '#news');
                return button;
            }
        }

        function createEllipsis() {
            const span = document.createElement('span');
            span.className = "w-12 sm:w-10 h-12 sm:h-10 flex items-center justify-center text-lg sm:text-base text-gray-700";
            span.textContent = '...';
            return span;
        }

        function renderPagination() {
            paginationContainer.innerHTML = '';

            const pageNumbers = new Set();
            pageNumbers.add(1);
            if (totalPages > 1) {
                pageNumbers.add(totalPages);
            }
            pageNumbers.add(currentPage);

            // Show 2 pages around current page
            for (let i = 1; i <= 2; i++) {
                if (currentPage - i > 1) pageNumbers.add(currentPage - i);
                if (currentPage + i < totalPages) pageNumbers.add(currentPage + i);
            }

            const sortedPages = Array.from(pageNumbers).sort((a, b) => a - b);

            let lastPage = 0;
            sortedPages.forEach(page => {
                if (lastPage !== 0 && page - lastPage > 1) {
                    paginationContainer.appendChild(createEllipsis());
                }
                paginationContainer.appendChild(createPageButton(page, page === currentPage));
                lastPage = page;
            });
        }

        renderPagination();
        paginationContainer.removeAttribute('data-current-page');
        paginationContainer.removeAttribute('data-total-pages');
    })();
</script>
{% endif %}
